(ns ring-app.core)

(defn foo
  "I don't do a whole lot."
  [x]
  (println x "Hello, World!"))

(defn handler
  "Handle HTTP requests"
  [request-map]
  {:status 200
   :handlers {"Content-type" "text/html"}
   :body (str "<html><body> your IP is: "
              (:remote-addr request-map)
              "</body></html>")}
  {:status 404
   :headers {"content-type" "text/html"}
   :body "<html><body></body></html>"})

(defn wrap-nocache [handler]
  (fn [request]
    (-> request
        handler
        (assoc-in [:headers "Pragma"] "no-cache"))))

(defn macro-test [form]
  (if (= (str form) "[]")
    (fn [form]
      (-> form
          (assoc 0 1)
          (assoc 1 2)
          (assoc 3 3)))
    (fn [form]
      (-> form
          (assoc 0 1)
          (assoc 1 2)
          (assoc 3 3)))))
        